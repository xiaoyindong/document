## 1. 概述

对于稍微有一些开发经验的开发同学在开发过程中总会有一些经验总结。

比如说当代码复杂度达到一定的级别，并且维护者的数量不止一个，就应该察觉到在开发新功能或者修复```bug```的时候，会变得小心翼翼。即使代码看起来没什么问题，但心里还是难免担忧，这个```Feature```会不会带来其它```bug```，这个```fix```会不会引入其它```Feature```。

当想对项目中的代码进行重构的时候，会花费大量的时间进行回归测试。

以上这些问题都是由于大多数开发者所使用最基本的手动测试的方式所带来的问题，解决它的根本原因就在于引入自动化测试方案。

在日常的开发中，代码的完工其实并不等于开发的完工，如果没有测试，不能保证代码能够正常运行。应用程序测试是指检查程序运行过程是否正确。一般分为手动测试和自动化测试。手动测试不适合大型项目，而且容易忘记测试某项功能，大部分时间都在做回归测试。

自动化测试是利用计算机程序检查软件是否运行正常的测试方法，就是用其它额外的代码检查被测软件的代码。当测试代码编写完成之后可以无限重复使用。编写自动化测试脚本的方式有很多，可以通过浏览器自动执行的程序，也可以直接调用源代码里的函数，还可以直接对比程序渲染之后的截图。

自动化测试可以今早的发现程序的```bug```和不足，可以增强程序员对程序健壮性，稳定性的信心，还可以改进设计，快读反馈，减少调试时间，甚至是促进重构。

当然自动化测试不可能保证一个程序是完全正确的，而且事实上，在实际开发过程中，编写自动化测试代码通常是开发人员不太喜欢的一个环节，大多数情况下，前端开发人员在开发完一项功能后，只是打开浏览器手动点击查看效果是否正确，之后就很少对该代码进行管理。

前端开发常见的测试主要分为```4```种，单元测试是验证独立的单元是否正常工作。集成测试验证多个单元协同工作。端到端测试可以从用户角度以机器的方式在真实浏览器环境验证应用交互。快照测试是验证程序的```UI```变化。

## 2. 单元测试

单元测试是应对程序最小的部分运行测试的过程。通常测试的单元是函数，但在前端应用中，组件也是被测单元。单元测试可以单独调用源代码中的函数并断言其行为是否正确。

```js
// 源码
export default const sum(a, b) => {
    reurn a + b;
}

// 测试
import sum from './sum';

const testSum = () => {
    if (sum(1, 1) !== 2) {
        throw new Error('sum(1, 1) did not return 2');
    }
}

testSum();
```

与端到端测试不同，单元测试的运行速度很快，只需要几秒钟的运行时间，因此可以在每次代码变更后都运行单元测试，从而快速得到变更是否破坏现有功能的反馈。单元测试应该避免依赖性问题，比如不存取数据库，不访问网络等等，而是使用工具虚拟出运行环境，这种虚拟使得测试成本最小，不用花大力气搭建环境。不过由于单元测试是独立的，所以无法保证多个单元运行到一起是否正确。

常见的```javascript```单元测试框架有```jest```，```mocha```，```jasmine```，```karma```，```ava```，```tape```。

```mocha```与```jest```是目前最火的两个单元测试框架，基本上目前单元测试就在这两个库之间选，总的来说```jest```功能齐全，配置方便，```mocha```自由灵活自由配置，两者功能范围可以粗略表示为。

```s
jest === mocha + chai + sinon + mockserver + istanbul
```

## 3. 集成测试

开发者定义集成测试的方式并不相同，由于是对于前端，有些人认为在浏览器环境上运行的测试是集成测试，有些人认为具有模块依赖性的单元测试的任何测试都是集成测试，也有些人认为任何完全渲染