## 1. 浏览器内多标签通信

1. webSocket
2. SharedWorker
3. localStorge

## 2. eveal是什么

可以将字符串解析成js代码并运行，由JSON字符串转换成JSON对象的时候可以用eval。

```js
var obj = eval('(' + str ')');
```

## 3. parseInt

```js
['1', '2', '3'].map(parseInt); // [1, NaN, NaN]
```

parseInt接收两个参数，第一个参数是要提取的值，第二个参数指定第一个参数的进位制。第一次执行第一个参数是1，第二个参数是0，第二个参数为零默认是10进制，所以返回1，第二次执行输入2，进位制是1，1进制不能出现2，所以是NaN，第三次执行同理。

## 4. use strict

是一种ES5添加的严格模式，使得JS在严格条件下运行，消除JS语法的不合理和不严谨之处，减少怪异行为，比如不能使用with，不能使用全局变量，函数必须先声明后调用，arguments不可使用。为未来做一些铺垫。

## 5. defer 和 async

defer和async作为script的属性，都是异步加载js代码，当html解析的时候如果遇到script设置了defer或者async属性，会异步加载对应的js，而不影响html的解析，不同的是。

defer的执行是在DOMContentLoaded事件之前，并且如果存在多个defer属性的script，他们执行的顺序是按书写的顺序执行，所以是有序的。

而async执行的顺序是哪个加载完了哪个就会执行，并且他们也不一定在DOMContentLoaded事件之前或之后执行，而是加载完了就执行。

## 6. 判断当前脚本在node还是浏览器

```js
this === window ? 'browser' : 'node';
```

## 7. 强制类型转换

parseInt, parseFloat, Number。

## 8. 隐式转换

```js
undefined == null; // true
1 == true; // true
2 == true; // false
0 == false; // true
0 == ''; // true
NaN == NaN; // false
[] == false; // true
[] == ![]; // true
```

## 9. 获取url参数

```js
const params = {};
window.location.search.replace(/([^?&=]+)=([^&]+)/g, (...props) => { params[props[1]] = props[2];})
```

## 10. readonly和disabled区别

readonly只针对input的text和password再就是textarea有效，disabled针对所有表单元素有效。

disabled不会将被设置的元素提交，readonly会提交。

## 11. 类数组对象转换成数组

```js
Array.prototype.slice.call(arrayLike);
Array.from(arrayLike);
Array.prototype.concat.apply([], arrayLike);
```

## 12. 数组拍平并排序

```js
[1, 2, [1, 2, [1, 2, [1, 2, [1, 2]]]]].toString().split(',').sort((a, b) => { return a - b});
```

## 13. 实现new关键字

```js
function _new (fn, ...arg) {
    // 创建一个空对象，__proto__属性指向构造函数的原型对象
    var obj = Object.create(fn.prototype);
    // 把创建的对象赋值构造函数内部的this，用构造函数内部的方法修改空对象
    const result = fn.apply(obj, ...arg);
    // 如果构造函数返回非基本类型的值，则返回这个值，否则返回创建的对象
    return Object.prototyoe.toSring.call(result == '[object Object]' ? result : obj);
}
```

## 14. 数组拍平

```js
const flatten = array => array.reduce((acc, cur) => (Array.isArray(cur) ? [...acc, ...flatten(cur)]) : [...acc, cur], []);
```

## 15. 实现一个sleep函数

```js
const sleep = (time) => {
    return new Promise(resolve => setTimeout(resolve, time))
}
```

## 16. 将数组元素向右移动k个位置，k>=0

```js
const k = 3;
const arr = [1,2,3,4,5];
arr.splice(-k * arr.length).concat(arr);
```

## 17. 判断url是否合法

```js
const url = '';
try {
    new URL(url);
    return true;
} catch {
    return false;
}
```

## 18. 求几个数组的交集

```js
const a = [1, 2, 3];
const b = [1, 4, 5];
const c = [1, 5, 6];
[a, b, c].reduce((result, arg) => {
    return result.filter(item => arg.includes(item));
})
```

## 19. 金钱格式分割

```js
10000000000.toLocaleString('de-DE');

10000000000.replace(/\B(?=(\d{3})+(?!\d))/g, '.');

10000000000.replace(/(\d)(?=(\d{3})+\b)/g, '$1.');
```

## 20 二进制转base64

```js
const str = new Uint8Array(byte).reduce((accu, next) =>{
    return accu + String.fromCharCode(next);
}, '');

`data:image/png;base64,${btoa(str)}`;
```

## 21. 实现一个indexOf

```js
function _indexOf(string, target) {
    const mt = string.match(new RegExp(target));
    return mt ? mt.index : -1;
}
```