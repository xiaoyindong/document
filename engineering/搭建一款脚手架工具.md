

## 1. 流程

#### 1. 创建npm项目

#### 2. 创建脚手架入口文件，在文件最上方添加:

```js
#!/usr/bin/env node
```

#### 3. 配置package.json，添加bin属性

#### 4. 编写脚手架代码

#### 5. 将脚手架发布到npm

按照上面的流程脚手架就基本开发完成了，使用也很简单，只需要使用```npm```安装运行就可以了。

脚手架开发的过程中通常会把一些复杂的系统拆分成若干个模块也就是分包，这是脚手架开发过程中的一个难点。第二个难点是如何对命令进行注册并且将命令执行到对应的方法上面。第三个难点是参数解析。

```js
vue command [options] <params>
```

```options```全称: ```--version, --help```

```options```简称:``` -V, -h```

带```params```的```options```: ```--path /Users/yindong/Desktop/test```

第四个难点就是帮助文档，他告诉用户脚手架如何进行使用。书写起来相当复杂。

最后脚手架开发起来还会有很多内容，比如命令行交互，日志打印，命令行文字变色，网络通信，文件处理等等。

## 创建一个简单的脚手架

```s
mkdir yd-test
cd yd-test/
npm init -y
touch ./bin/index.js
```

bin/index.js

```js
#!/usr/bin/env node

console.log('welcom yd test');
```

在package.json中新增bin，并且制定命令yd-test到bin/index.js文件。

```json
"bin": {
    "yd-test": "bin/index.js"
}
```

这样我们一个简单的命令就配置好了，当我们执行yd-test命令的时候就会执行bin/index.js文件中的代码。我们需要将这个脚手架发布到npm上，然后使用全局安装命令来安装之后才可以使用。

## 本地调试

如果你觉得发布到npm再进行安装太过麻烦，尤其需