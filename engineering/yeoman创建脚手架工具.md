## 1. 概述

脚手架可以简单的理解为自动创建项目基础文件的工具，除了创建文件更重要的是提供给开发者一些约定和规范。通常在去开发相同类型的项目时，都会有一些相同的约定，其中会有相同的文件组织结构，相同的代码开发范式，相同的模块依赖，设置还有有一些相同的工具配置，最后甚至连一些基础代码都是一样的。

这样一来搭建新项目时有大量重复工作要做，脚手架工具就是解决这一类问题的。可以通过脚手架工具快速搭建特定类型的项目骨架，然后基于骨架进行后续的开发工作。类似```eclipse```，```visual studio```这这些```IDE```工具，他们创建项目的过程实际上就是一个脚手架的工作流程。

在前端项目创建过程当中，由于前端技术选型比较多样，又没有一个统一的标准，所以前端方向的脚手架一般不会集成在某一个IDE当中，都是以独立的工具存在的，并且相对会复杂一些，但是本质上，脚手架的目标是一样的，都是为了解决在创建项目过程中的一些复杂的工作。

目前市面上有很多成熟的脚手架工具，基本都是为特定项目服务的，例如```create-react-app```，```vue-cli```，```angular```。这些工具的实现方式大同小异，无外乎就是根据用户输入的信息创建对应的项目结构，最终生成项目的配置，不过他们一般只适用于自身所服务的那个框架项目。

还有一类就是以```Yeoman```工具为代表的通用型项目脚手架工具，可以根据一套模板生成对应的项目结构。这种类型的脚手架很灵活而且很容易扩展。

## 2. Yeoman

```Yeoman```官方的定义是一款用于创造现代化```web```应用的脚手架工具，不同于```vue-cli```工具```Yeoman```更像是一个脚手架的运行平台，可以通过```Yeoman```搭配不同的```generator```创建任何类型的项目。```Yeoman```的缺点在于他过于通用，不够专注，所以开发者更愿意使用像```Vue-cli```这样一类的脚手架。

```yo```就是```yeoman```工具模块的名字，可以使用```yarn```或者```npm```进行安装。

```s
yarn global add yo
```

要想使用```Yeoman```创建项目必须要找到对应项目类型的```generator```。例如想要生成```Node Module```项目，可以使用```generator-node```模块，使用方式是先把他通过全局范围安装的方式安装到本地。

```s
yarn global add generator-node;
```

有了这两款模块就可以使用```yarn```运行刚刚安装的```generator-node```的```gengerator```也就是生成器自动的创建一个全新的```Node Module```，可以先定位到项目所在的目录，也就是要执行命令的文件夹。

可以通过```Yeoman```命令```yo```加上刚刚安装的```generator-node```的生成器。运行特定的```generator```就是把包名字前面的```generator-```前缀去掉。

```s
yo node
```

在这个过程```Yeoman```会提出一些问题，可以在命令行当中通过交互的方式把他填写进去，首先第一个是模块名字，会自动检查包名是否可用。填写完毕会在项目中创建一些基础文件，并且在项目根目录运行```npm install```安装项目必要的依赖。在目录中除了基本的文件外内部的一些基础代码基础的配置，都是提前配置好的，这也是脚手架工具的一个优势。

## 3. 子集生成器

有时候并不需要创建完整的项目结构，可能只是需要在已有的项目基础之上去创建一些特定类型的文件，例如给一个已经存在的的项目创建一个```readme```，又或是在一个原有项目之上添加某些类型的配置文件，比如```esline```、```babel```，这些配置文件都有一些基础代码如果自己手动去写的话很容易配错，可以使用```Yeoman```提供的```sub generator```实现。

在项目目录下运行特定的```sub generator```命令生成对应的文件。这里使用```generator-node```提供的子集生成器```cli```生成一个```cli```应用所需要的文件，让模块变成```cli```应用。

```s
yo node:cli
```

运行```sub generator```的方式就是在原有```generator```命令后面跟上```sub generator```的名字。会提示是否要重写```package.json```文件，原因是在添加```cli```支持的时候会添加一些新的模块和配置选择```yes```即可。完成过后会提示重写了```package.json```创建了```lib\cli.js```。

在``package.json``中出现了一个```"bin": "lib/cli.js"```以及新的```dependencies```，这些都是```cli```应用中需要的。有了这些就可以将```cli```代码模块作为一个全局的命令行模块去使用了，本地的模块可以通过```yarn link```到全局范围。

```s
yarn link // 映射到全局
yarn // 安装依赖
my-module --help // 运行
```

并不是每一个```generator```都一个子集的生成器，所以在使用之前要通过所使用的```generator```的官方文档来明确这个```generator```下面有没有一个子集的生成器。

## 4. 自定义 Generator

不同