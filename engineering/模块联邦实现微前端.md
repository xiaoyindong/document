## 1. 概述

当前案例中包含三个微应用，分别为```Marketing```、```Authentication```和```Dashboard```。

Marketing是营销微应用，包含首页组件和价格组件。```Authentication```是身份验证微应用，包含登录组件。```Dashboard```是仪表盘微应用，包含仪表盘组件。

容器应用、营销应用、身份验证应用使用```React```框架，仪表盘应用使用```Vue```框架。

## 2. Marketing应用

```json
{
  "name": "marketing",
  "version": "1.0.0",
  "scripts": {
    "start": "webpack serve"
  },
  "dependencies": {
    "@material-ui/core": "^4.11.0",
    "@material-ui/icons": "^4.9.1",
    "react": "^17.0.1",
    "react-dom": "^17.0.1",
    "react-router-dom": "^5.2.0"
  },
  "devDependencies": {
    "@babel/core": "^7.12.3",
    "@babel/plugin-transform-runtime": "^7.12.1",
    "@babel/preset-env": "^7.12.1",
    "@babel/preset-react": "^7.12.1",
    "babel-loader": "^8.1.0",
    "clean-webpack-plugin": "^3.0.0",
    "css-loader": "^5.0.0",
    "html-webpack-plugin": "^4.5.0",
    "style-loader": "^2.0.0",
    "webpack": "^5.4.0",
    "webpack-cli": "^4.1.0",
    "webpack-dev-server": "^3.11.0",
    "webpack-merge": "^5.2.0"
  }
}
```

### 1. 创建应用结构

```s
├── public
│   └── index.html
├── src
│   ├── bootstrap.js
│   └── index.js
├── package-lock.json
├── package.json
└── webpack.config.js
```

```html
<!-- index.html -->
<title>Marketing</title>
<div id="dev-marketing"></div>
```

```js
// index.js
import("./bootstrap")
```

```js
// bootstrap.js
console.log('Hello')
```

### 2. 配置 webpack。

```js
const HtmlWebpackPlugin = require("html-webpack-plugin")
module.exports = {
  mode: "development",
  devServer: {
		port: 8081,
		// 当使用 HTML5 History API 时, 所有的 404 请求都会响应 index.html 文件 
		historyApiFallback: true
	}, 
	module: {
		rules: [ 
			{
						test: /\.js$/,
						exclude: /node_modules/,
						use: {
							loader: "babel-loader",
							options: {
								presets: ["@babel/preset-react", "@babel/preset-env"], 
								// 1. 避免 babel 转义语法后 helper 函数重复
								// 2. 避免 babel polyfill 将 API 添加到全局
								plugins: ["@babel/plugin-transform-runtime"]
							} 
						}
			} 
		]
	}, 
	plugins: [
			new HtmlWebpackPlugin({
				template: "./public/index.html"
			}) 
	]
}
```

### 3. 添加启动命令。

```json
"scripts": {
  "start": "webpack serve"
}
```

### 4. 创建挂载方法

```js
// bootstrap.js
import React from "react"
import ReactDOM from "react-dom"

function mount(el) {
  ReactDOM.render(<div>Marketing works</div>, el)
}

if (process.env.NODE_ENV === "development") {
	const el = document.querySelector("#dev-marketing")
  if (el) {
		mount(el)
	}
}
```
 
### 5. 创建路由

在```src```文件夹中创建```components```文件夹用于放置页面组件，在```src```文件夹中创建```App```组件，用于编写路由。

```js
// App.js
import React from "react"
import { BrowserRouter, Route, Switch } from "react-router-dom"
import Landing from "./components/Landing"
import Pricing from "./components/Pricing"
export default function App() {
  return (
    <BrowserRouter>
      <Switch>
        <Route path="/pricing" component={Pricing} />
        <Route path="/" component={Landing} />
      </Switch>
    </BrowserRouter>
	) 
}
```

```js
// bootstrap.js
import App from "./App"
function mount(el) {
  ReactDOM.render(<App />, el)
}
```

## 3. Container应用

```json
{
  "name": "container",
  "version": "1.0.0",
  "scripts": {
    "start": "webpack serve"
  },
  "dependencies": {
    "@material-ui/core": "^4.11.0",
    "@material-ui/icons": "^4.9.1",
    "react": "^17.0.1",
    "react-dom": "^17.0.1",
    "react-router-dom": "^5.2.0"
  },
  "devDependencies": {
    "@babel/core": "^7.12.3",
    "@babel/plugin-transform-runtime": "^7.12.1",
    "@babel/preset-env": "^7.12.1",
    "@babel/preset-react": "^7.12.1",
    "babel-loader": "^8.1.0",
    "clean-webpack-plugin": "^3.0.0",
    "css-loader": "^5.0.0",
    "html-webpack-plugin": "^4.5.0",
    "style-loader": "^2.0.0",
    "webpack": "^5.4.0",
    "webpack-cli": "^4.1.0",
    "webpack-dev-server": "^3.11.0",
    "webpack-merge": "^5.2.0"
  }
}
```

### 1. 创建应用结构 (基于 Marketing 应用进行拷贝修改)。
